<!DOCTYPE html>
<html>
<head>
    <title>S725076-Dependency-Report</title>

    <script type="text/javascript" src="https://rally1.rallydev.com/apps/2.1/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",_projectId:void 0,_mapProjects:void 0,_releaseId:void 0,_releaseName:void 0,_iterationId:void 0,_iterationName:void 0,_searchParameter:"f",_storiesFilter:void 0,_featureStateExclude:void 0,_dependentFeatureStateExclude:void 0,_milestoneType:void 0,_selectedMilestones:void 0,items:[{xtype:"container",itemId:"header",cls:"header"},{xtype:"container",itemId:"bodyContainer",width:"100%",autoScroll:!0}],launch:function(){var e=this.getContext().getProject().ObjectID;this._projectId=e,console.log("Project:",this._projectId),this.myMask=new Ext.LoadMask({msg:"Please wait...",target:this});var t=Ext.create("Rally.ui.combobox.ReleaseComboBox",{fieldLabel:"Choose Release",width:400,itemId:"releasaeComboBox",allowClear:!0,showArrows:!1,scope:this,listeners:{ready:function(e){var t=e.getRecord();this._releaseId=t.get("ObjectID"),this._releaseName=e.getRecord().get("Name")},select:function(e,t){var a=t[0];this._releaseId=a.get("ObjectID"),this._releaseName=e.getRecord().get("Name")},scope:this}}),a=Ext.create("Rally.ui.combobox.IterationComboBox",{fieldLabel:"Choose Iteration",width:400,itemId:"iterationComboBox",allowClear:!0,showArrows:!1,scope:this,listeners:{ready:function(e){var t=e.getRecord();this._iterationId=t.get("ObjectID"),this._iterationName=t.get("Name")},select:function(e,t,a){var o=t[0];this._iterationId=o.get("ObjectID"),this._iterationName=o.get("Name")},scope:this}});this._milestoneComboStore=void 0,this._milestoneCombo=Ext.widget("rallymilestonecombobox",{itemId:"milestonecombobox",allowClear:!0,multiSelect:!1,queryMode:"local",width:300,listeners:{afterrender:function(e){e.disable()},beforerender:function(e){console.log("beforerender: ",e),this._blockFilters()},ready:function(e){console.log("ready: ",e.value),this._unBlockFilters(),e.refreshStore(),e.enable()},change:function(e){if(console.log("milestone change: ",e.getValue()),e.getValue()&&""!=e.getValue()&&e.valueModels.length>0){var t=e.valueModels;t.sort(function(e,t){return e.get("TargetDate").getTime()-t.get("TargetDate").getTime()}),this._selectedMilestones=t}else this._selectedMilestones=[],this._applyMilestoneRangeFilter(this._initDate,this._endDate,this._milestoneComboStore,this)},scope:this}}),this._milestoneComboStore=this._milestoneCombo.getStore();var o={xtype:"rallyfieldvaluecombobox",fieldLabel:"Exclude Feature States",id:"excludedStatesComboBox",defaultSelectionPosition:"none",multiSelect:!0,model:"PortfolioItem/Feature",field:"State",scope:this,listeners:{change:function(e){console.log("Feature State: ",e.lastSelection),this._featureStateExclude=e.lastSelection},scope:this}},n={xtype:"rallyfieldvaluecombobox",fieldLabel:"Exclude Dependent Feature States",id:"excludedDependentStatesComboBox",multiSelect:!0,defaultSelectionPosition:"none",model:"PortfolioItem/Feature",field:"State",scope:this,listeners:{change:function(e){console.log("Dependent Feature State: ",e.lastSelection),this._dependentFeatureStateExclude=e.lastSelection},scope:this}},r={xtype:"rallyfieldvaluecombobox",fieldLabel:"Exclude Story States",id:"excludedScheduleStatesComboBox",defaultSelectionPosition:"none",multiSelect:!0,hidden:!0,model:"HierarchicalRequirement",field:"ScheduleState",scope:this,listeners:{change:function(e){console.log("Story State: ",e.lastSelection),this._featureStateExclude=e.lastSelection},scope:this}},l={xtype:"rallyfieldvaluecombobox",fieldLabel:"Exclude Dependent Story States",id:"excludedDependentScheduleStatesComboBox",defaultSelectionPosition:"none",multiSelect:!0,hidden:!0,model:"HierarchicalRequirement",field:"ScheduleState",scope:this,listeners:{change:function(e){console.log("Dependent Story State: ",e.lastSelection),this._dependentFeatureStateExclude=e.lastSelection},scope:this}},i=Ext.create("Rally.ui.Button",{text:"Search",margin:"10 10 10 100",scope:this,handler:function(){this._doSearch()}});this.down("#header").add([{xtype:"panel",id:"filterPanel",autoWidth:!0,layout:"hbox",items:[{xtype:"panel",title:"Filter:",id:"innerFilterPanel",flex:3,align:"stretch",autoHeight:!0,bodyPadding:10,items:[{xtype:"radiogroup",id:"featureStoriesRadioGroup",items:[{xtype:"radiofield",id:"radio1",name:"parameter",boxLabel:"Features",checked:!0,padding:"0 10 0 0",inputValue:"f"},{id:"radio2",name:"parameter",boxLabel:"Stories",padding:"0 10 0 0",inputValue:"s"}],listeners:{change:function(e,o,n){var r=o.parameter;this._searchParameter=r,console.log("value radio:",r);var l=Ext.ComponentQuery.query("#storiesRadioFilter")[0];"f"===r?(t.show(),a.hide(),l.hide(),Ext.ComponentQuery.query("#excludedStatesComboBox")[0].show(),Ext.ComponentQuery.query("#excludedDependentStatesComboBox")[0].show(),Ext.ComponentQuery.query("#excludedScheduleStatesComboBox")[0].hide(),Ext.ComponentQuery.query("#excludedDependentScheduleStatesComboBox")[0].hide(),Ext.ComponentQuery.query("#excludedScheduleStatesComboBox")[0].setValue(),Ext.ComponentQuery.query("#excludedDependentScheduleStatesComboBox")[0].setValue()):"s"===r?(l.show(),Ext.ComponentQuery.query("#releaseRadio")[0].setValue("r"),Ext.ComponentQuery.query("#excludedStatesComboBox")[0].hide(),Ext.ComponentQuery.query("#excludedDependentStatesComboBox")[0].hide(),Ext.ComponentQuery.query("#excludedScheduleStatesComboBox")[0].show(),Ext.ComponentQuery.query("#excludedDependentScheduleStatesComboBox")[0].show(),Ext.ComponentQuery.query("#excludedStatesComboBox")[0].setValue(),Ext.ComponentQuery.query("#excludedDependentStatesComboBox")[0].setValue()):(t.hide(),a.hide(),l.hide())},scope:this}},o,n,r,l,{xtype:"radiogroup",id:"storiesRadioFilter",fieldLabel:"Choose",columns:2,vertical:!0,items:[{boxLabel:"Release",id:"releaseRadio",name:"storiesFilter",padding:"0 10 0 0",inputValue:"r"},{boxLabel:"Iteration",id:"iteartionRadio",name:"storiesFilter",padding:"0 10 0 0",inputValue:"i"}],listeners:{change:function(e,o,n){var r=o.storiesFilter;this._storiesFilter=r,console.log("value radio:",r),"r"===r?(t.show(),a.hide()):"i"===r?(t.hide(),a.show()):(t.hide(),a.hide())},scope:this}}]},{xtype:"panel",title:"Milestone Filter:",flex:3,align:"stretch",autoHeight:!0,bodyPadding:10,items:[{xtype:"datefield",anchor:"100%",fieldLabel:"From",scope:this,listeners:{change:function(e,t,a){this._initDate=t;this._applyMilestoneRangeFilter(this._initDate,this._endDate,this._milestoneComboStore,this)},scope:this}},{xtype:"datefield",anchor:"100%",fieldLabel:"To",scope:this,listeners:{change:function(e,t,a){this._endDate=t;this._applyMilestoneRangeFilter(this._initDate,this._endDate,this._milestoneComboStore,this)},scope:this}},{xtype:"rallyfieldvaluecombobox",fieldLabel:"Milestone Types",model:"Milestone",field:"c_Type",scope:this,listeners:{change:function(e){console.log("Milestone type: ",e.getValue()),this._milestoneType=e.getValue(),this._applyMilestoneRangeFilter(this._initDate,this._endDate,this._milestoneComboStore,this,this._milestoneType)},scope:this}}]}]},{xtype:"panel",items:[t,a,{xtype:"fieldcontainer",fieldLabel:"Milestone",pack:"end",labelAlign:"right",items:[this._milestoneCombo]},i]}]),Ext.ComponentQuery.query("#storiesRadioFilter")[0].hide(),a.hide()},_applyMilestoneRangeFilter:function(e,t,a,o,n){!e||t||n?!t||e||n?e&&t&&!n?this._milestoneComboStore.filterBy(function(a){if(a.get("TargetDate")&&a.get("TargetDate").getTime()>e.getTime()&&a.get("TargetDate").getTime()<t.getTime())return a},o):e&&!t&&n?this._milestoneComboStore.filterBy(function(t){if(t.get("TargetDate")&&t.get("TargetDate").getTime()>e.getTime()&&t.get("c_Type")===this._milestoneType)return t},o):!e&&t&&n?this._milestoneComboStore.filterBy(function(t){if(t.get("TargetDate")&&t.get("TargetDate").getTime()<e.getTime()&&t.get("c_Type")===this._milestoneType)return t},o):e||t||!n?t&&e&&n?this._milestoneComboStore.filterBy(function(a){if(a.get("TargetDate")&&a.get("TargetDate").getTime()<t.getTime()&&a.get("TargetDate").getTime()>e.getTime()&&a.get("c_Type")===this._milestoneType)return a},o):this._milestoneComboStore.filterBy(function(e){return e}):this._milestoneComboStore.filterBy(function(e){if(e.get("c_Type")&&e.get("c_Type")===this._milestoneType)return e},o):this._milestoneComboStore.filterBy(function(e){if(e.get("TargetDate")&&e.get("TargetDate").getTime()<t.getTime())return e},o):this._milestoneComboStore.filterBy(function(t){if(t.get("TargetDate")&&t.get("TargetDate").getTime()>e.getTime())return t},o)},_blockFilters:function(){this.down("#header").disable()},_unBlockFilters:function(){this.down("#header").enable()},_doSearch:function(){this.down("#bodyContainer").removeAll(),this.myMask.show();var e=this._getTypes(),t=this._getFilters();console.log("filters for search",t),Ext.create("Rally.data.wsapi.artifact.Store",{models:e,filters:t,fetch:["Name","FormattedID","ScheduleState","State","PercentDoneByStoryPlanEstimate","Release","Owner","Project","Predecessors","Successors"],limit:1/0,context:{project:"/project/"+this._projectId,projectScopeUp:!1,projectScopeDown:!0},sorters:[{property:"FormattedID",direction:"ASC"}]}).load().then({success:function(e){if(console.log("records",e),e&&e.length>0){var t=[];_.each(e,function(e){var a=e.get("Predecessors"),o=a.Count,n=e.get("Successors"),r=n.Count;if(a&&o>0){var l=Ext.create("Deft.Deferred");t.push(l);var i=this._loadPredecessors(e);Deft.Promise.all(i).then({success:function(t){console.log("p loaded for:",a),"empty"!==t[0]&&(e.get("Predecessors").data=t),l.resolve()},failure:function(e){console.log("error:",e)},scope:this})}if(n&&r>0){var s=Ext.create("Deft.Deferred");t.push(s);var d=this._loadSuccessors(e);console.log("creating call to load successors for",d,n),Deft.Promise.all(d).then({success:function(t){console.log("s loaded for:",t,n),"empty"!==t[0]&&(e.get("Successors").data=t),s.resolve()},failure:function(e){console.log("error:",e)},scope:this})}},this),Deft.Promise.all(t).then({success:function(){console.log("all artifacts loaded with predecessors and successors"),this.myMask.hide(),this._createGrid(e)},failure:function(e){console.log("error:",e)},scope:this})}else this.myMask.hide()},scope:this})},_getTypes:function(){var e=[];return"f"===this._searchParameter?e.push("PortfolioItem/Feature"):e.push("HierarchicalRequirement"),e},_getFilters:function(){var e,t=Ext.create("Rally.data.QueryFilter",{property:"Predecessors.ObjectID",operator:"!=",value:"null"}),a=Ext.create("Rally.data.QueryFilter",{property:"Successors.ObjectID",operator:"!=",value:"null"}),o=t.or(a);"f"===this._searchParameter?e=Ext.create("Rally.data.QueryFilter",{property:"Release.name",operator:"=",value:this._releaseName}):e="r"===this._storiesFilter?Ext.create("Rally.data.QueryFilter",{property:"Release.name",operator:"=",value:this._releaseName}):Ext.create("Rally.data.QueryFilter",{property:"Iteration.Name",operator:"=",value:this._iterationName});if("f"===this._searchParameter&&this._featureStateExclude&&this._featureStateExclude.length>0){console.log("exclude filters:",this._featureStateExclude);var n=this._getExcludadeFeatureStateFilter();_.each(n,function(e){o=o.and(e)},this)}if("s"===this._searchParameter&&this._featureStateExclude&&this._featureStateExclude.length>0){console.log("exclude story filters:",this._featureStateExclude);n=this._getExcludadeStoryScheduleStateFilter();_.each(n,function(e){o=o.and(e)},this)}var r=e.and(o),l=this._getMilestoneFilter();return l&&(r=r.and(l)),r},_getMilestoneFilter:function(){var e=null;return this._selectedMilestones&&this._selectedMilestones.length>0&&_.each(this._selectedMilestones,function(t){var a=t.get("_ref"),o=Ext.create("Rally.data.QueryFilter",{property:"Milestones",operator:"contains",value:a});e=e?e.or(o):o},this),console.log("filter",e),e},_createGrid:function(e){console.log("Creating grid with artifacts",e);var t=[];if("f"===this._searchParameter){var a=0;_.each(e,function(e){e.get("Predecessors")&&e.get("Predecessors").data&&_.each(e.get("Predecessors").data,function(o){t.push({CountID:a,FormattedID:e.get("FormattedID")+" - "+e.get("Name"),Release:e.get("Release")?e.get("Release").Name:"",State:e.get("State")?e.get("State").Name:"",PercentDoneByStoryPlanEstimate:e.get("PercentDoneByStoryPlanEstimate"),Project:e.get("Project").Name,Type:"P",DependentFeature:o.get("FormattedID")+" - "+o.get("Name"),DependentPercentDoneByStoryPlanEstimate:o.get("PercentDoneByStoryPlanEstimate"),DependentProject:o.get("Project").Name,DependentRelease:o.get("Release")?o.get("Release").Name:"",DependentState:o.get("State")?o.get("State").Name:"",DependentPlannedEndDate:o.get("PlannedEndDate")})},this),e.get("Successors")&&e.get("Successors").data&&_.each(e.get("Successors").data,function(o){t.push({CountID:a,FormattedID:e.get("FormattedID")+" - "+e.get("Name"),Release:e.get("Release")?e.get("Release").Name:"",State:e.get("State")?e.get("State").Name:"",PercentDoneByStoryPlanEstimate:e.get("PercentDoneByStoryPlanEstimate"),Project:e.get("Project").Name,Type:"S",DependentFeature:o.get("FormattedID")+" - "+o.get("Name"),DependentPercentDoneByStoryPlanEstimate:o.get("PercentDoneByStoryPlanEstimate"),DependentProject:o.get("Project").Name,DependentRelease:o.get("Release")?o.get("Release").Name:"",DependentState:o.get("State")?o.get("State").Name:"",DependentPlannedEndDate:o.get("PlannedEndDate")})},this),a++},this)}else{a=0;_.each(e,function(e){e.get("Predecessors")&&e.get("Predecessors").data&&_.each(e.get("Predecessors").data,function(o){t.push({CountID:a,FormattedID:e.get("FormattedID")+" - "+e.get("Name"),Release:e.get("Release")?e.get("Release").Name:"",Iteration:e.get("Iteration")?e.get("Iteration").Name:"",State:e.get("ScheduleState"),Project:e.get("Project").Name,Type:"P",DependentFeature:o.get("FormattedID")+" - "+o.get("Name"),DependentProject:o.get("Project").Name,DependentRelease:o.get("Release")?o.get("Release").Name:"",DependentIteration:o.get("Iteration")?o.get("Iteration").Name:"",DependentState:o.get("ScheduleState")?o.get("ScheduleState"):""})},this),e.get("Successors")&&e.get("Successors").data&&_.each(e.get("Successors").data,function(o){t.push({CountID:a,FormattedID:e.get("FormattedID")+" - "+e.get("Name"),Release:e.get("Release")?e.get("Release").Name:"",Iteration:e.get("Iteration")?e.get("Iteration").Name:"",State:e.get("ScheduleState"),Project:e.get("Project").Name,Type:"S",DependentFeature:o.get("FormattedID")+" - "+o.get("Name"),DependentProject:o.get("Project").Name,DependentRelease:o.get("Release")?o.get("Release").Name:"",DependentIteration:o.get("Iteration")?o.get("Iteration").Name:"",DependentState:o.get("ScheduleState")?o.get("ScheduleState"):""})},this),a++},this)}var o,n,r=Ext.create("Ext.data.JsonStore",{fields:["CountID","FormattedID","Type","Project","State","Release","Iteration","DependentFeature","PercentDoneByStoryPlanEstimate","DependentProject","DependentState","DependentPercentDoneByStoryPlanEstimate","DependentIteration","DependentRelease","DependentPlannedEndDate"],data:t});o="f"===this._searchParameter?[{text:"Count ID",dataIndex:"CountID",flex:1},{text:"Feature #",dataIndex:"FormattedID",flex:3},{text:"Feature State",dataIndex:"State",flex:1},{text:"Feature Project",dataIndex:"Project",flex:1},{text:"Percent Done By Story PlanEstimate",dataIndex:"PercentDoneByStoryPlanEstimate",flex:2,xtype:"templatecolumn",tpl:Ext.create("Rally.ui.renderer.template.progressbar.PercentDoneByStoryPlanEstimateTemplate",{isClickable:!1,showDangerNotificationFn:function(){return!1}})},{text:"Dependent P/S",dataIndex:"Type",flex:1},{text:"Dependent Feature #",dataIndex:"DependentFeature",flex:3},{text:"Dependent Feature Percent Done By Story PlanEstimate",dataIndex:"DependentPercentDoneByStoryPlanEstimate",flex:2,xtype:"templatecolumn",tpl:Ext.create("Rally.ui.renderer.template.progressbar.PercentDoneByStoryPlanEstimateTemplate",{isClickable:!1,percentDoneName:"DependentPercentDoneByStoryPlanEstimate",showDangerNotificationFn:function(){return!1}})},{text:"Dependent Project",dataIndex:"DependentProject",flex:1},{text:"Dependent Release",dataIndex:"DependentRelease",flex:1},{text:"Dependent State",dataIndex:"DependentState",flex:1},{text:"Dependent PlannedEndDate",dataIndex:"DependentPlannedEndDate",xtype:"datecolumn",format:"m/d/Y",flex:1}]:[{text:"Count ID",dataIndex:"CountID",flex:1},{text:"Story #",dataIndex:"FormattedID",flex:3},{text:"Story State",dataIndex:"State",flex:1},{text:"Story Project",dataIndex:"Project",flex:1},{text:"Dependent P/S",dataIndex:"Type",flex:1},{text:"Dependent Story #",dataIndex:"DependentFeature",flex:3},{text:"Dependent Project",dataIndex:"DependentProject",flex:1},{text:"Dependent Release",dataIndex:"DependentRelease",flex:1},{text:"Dependent Iteration",dataIndex:"DependentIteration",flex:1},{text:"Dependent State",dataIndex:"DependentState",flex:1}],n=Ext.create("Ext.grid.Panel",{itemId:"featuresGrid",store:r,viewConfig:{enableTextSelection:!0,listeners:{viewready:function(e){console.log("viewready, view"),this._updateRowSpan(o,n,r)},sortchange:function(e,t){console.log("sort change, view"),console.log("ext calling update rowspan",o),console.log("ext calling update rowspan",n),console.log("ext calling update rowspan",r),this._updateRowSpan(o,n,r)},scope:this}},listeners:{sortchange:function(e,t){console.log("sort change, grid"),console.log("ext calling update rowspan",o),console.log("ext calling update rowspan",n),console.log("ext calling update rowspan",r),this._updateRowSpan(o,n,r)},scope:this},columns:o});var l={xtype:"panel",id:"predSuccFilterPanel",flex:3,align:"stretch",autoHeight:!0,bodyPadding:10,items:[{xtype:"radiogroup",id:"predSuccFilterRadio",fieldLabel:"Choose filter",columns:3,vertical:!0,items:[{xtype:"radiofield",id:"radiop",name:"psaFilter",boxLabel:"Predecessors",padding:"0 10 0 0",inputValue:"p"},{id:"radios",name:"psaFilter",boxLabel:"Successors",padding:"0 10 0 0",inputValue:"s"},{id:"radioa",name:"psaFilter",boxLabel:"All",cheked:!0,padding:"0 10 0 0",inputValue:"a"}],listeners:{change:function(e,t,a){var l=t.psaFilter;console.log("value radio:",l),"p"===l?(r.clearFilter(!0),r.filter("Type","P")):"s"===l?(r.clearFilter(!0),r.filter("Type","S")):r.clearFilter(!1),this._updateRowSpan(o,n,r)},scope:this}}]},i=Ext.create("Rally.ui.Button",{text:"Export",margin:"10 10 10 10",scope:this,handler:function(){var e=this._convertToCSV(t);console.log("converting to csv:",e);var a=document.createElement("a"),o=new Blob(["\ufeff",e]),n=URL.createObjectURL(o);a.href=n,a.download="report.csv",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}),s=Ext.create("Ext.panel.Panel",{title:"TEAMS WORK ITEMS AND ALIGNED DEPENDENCIES",autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[l,n]});this.down("#bodyContainer").add(s),this.down("#bodyContainer").add(i)},_updateRowSpan:function(e,t,a){e=e;for(var o=t.getView(),n=(a=a).getCount(),r=e[1].dataIndex,l=null,i=null,s=null,d=null,c=null,u=0;u<n;++u){var p=o.getCellByPosition({row:u,column:0}).dom,h=o.getCellByPosition({row:u,column:1}).dom,m=o.getCellByPosition({row:u,column:2}).dom,g=a.getAt(u).get(r);c!==g?(null!==l&&(l.rowSpan=d,i.rowSpan=d,s.rowSpan=d),Ext.fly(p).setStyle("display",""),Ext.fly(p).setStyle("vertical-align","middle"),Ext.fly(h).setStyle("display",""),Ext.fly(h).setStyle("vertical-align","middle"),Ext.fly(m).setStyle("display",""),Ext.fly(m).setStyle("vertical-align","middle"),l=p,i=h,s=m,d=1,c=g):(d++,Ext.fly(p).setStyle("display","none"),Ext.fly(h).setStyle("display","none"),Ext.fly(m).setStyle("display","none"))}null!==l&&(l.rowSpan=d,i.rowSpan=d,s.rowSpan=d)},_getExcludadeFeatureStateFilter:function(){console.log("exclude filters:",this._featureStateExclude);var e=[];return _.each(this._featureStateExclude,function(t){var a=t.get("name");if("-- No Entry --"!==a){var o=Ext.create("Rally.data.QueryFilter",{property:"State",operator:"!=",value:a});e.push(o)}},this),e},_getExcludadeStoryScheduleStateFilter:function(){var e=[];return _.each(this._featureStateExclude,function(t){var a=t.get("name");if(a){var o=Ext.create("Rally.data.QueryFilter",{property:"ScheduleState",operator:"!=",value:a});e.push(o)}},this),console.log("exclude story filters:",e),e},_getDependentExcludadeFeatureStateFilter:function(){console.log("exclude dependent filters:",this._dependentFeatureStateExclude);var e=[];return _.each(this._dependentFeatureStateExclude,function(t){var a=t.get("name");if("-- No Entry --"!==a){var o=Ext.create("Rally.data.QueryFilter",{property:"State",operator:"!=",value:a});e.push(o)}},this),console.log("exclude dependent feature filters:",e),e},_getDependentExcludadeStoryScheduleStateFilter:function(){console.log("exclude dependent filters:",this._dependentFeatureStateExclude);var e=[];return _.each(this._dependentFeatureStateExclude,function(t){var a=t.get("name");if(a){var o=Ext.create("Rally.data.QueryFilter",{property:"ScheduleState",operator:"!=",value:a});e.push(o)}},this),console.log("exclude dependent story filters:",e),e},_loadPredecessors:function(e){var t=Ext.create("Deft.Deferred"),a=[];return"f"==this._searchParameter&&this._dependentFeatureStateExclude&&(a=this._getDependentExcludadeFeatureStateFilter()),"s"==this._searchParameter&&this._dependentFeatureStateExclude&&(a=this._getDependentExcludadeStoryScheduleStateFilter()),e.getCollection("Predecessors").load({fetch:["Name","FormattedID","ScheduleState","State","Project","PlanEstimate","PercentDoneByStoryPlanEstimate","LeafStoryPlanEstimateTotal","Release","Iteration","PlannedEndDate"],filters:a,scope:this,callback:function(e,a,o){console.log("predecessor loaded:",e),e.length>0?t.resolve(e):t.resolve(["empty"])}}),t.promise},_loadSuccessors:function(e){var t=Ext.create("Deft.Deferred"),a=[];return"f"==this._searchParameter&&this._dependentFeatureStateExclude&&(a=this._getDependentExcludadeFeatureStateFilter()),"s"==this._searchParameter&&this._dependentFeatureStateExclude&&(a=this._getDependentExcludadeStoryScheduleStateFilter()),e.getCollection("Successors").load({fetch:["Name","FormattedID","ScheduleState","State","Project","PlanEstimate","LeafStoryPlanEstimateTotal","PercentDoneByStoryPlanEstimate","Release","Iteration","PlannedEndDate"],filters:a,scope:this,callback:function(e,a,o){console.log("successor loaded:",e),e.length>0?t.resolve(e):t.resolve(["empty"])}}),t.promise},_convertToCSV:function(e){var t=Object.keys(e[0]),a=function(e,t){return null===t?"":t},o=e.map(function(e){return t.map(function(t){return JSON.stringify(e[t],a)}).join(",")});return o.unshift(t.join(",")),o.join("\r\n")}});

            Rally.launchApp('CustomApp', {
                name:"S725076-Dependency-Report",
                parentRepos:"",
                version:"0.1.1"
            });

        });
    </script>


    <style type="text/css">
        .grid-row-span .x-grid3-row{border-bottom:0}.grid-row-span .x-grid3-col{border-bottom:1px solid #ededed}.grid-row-span .row-span{border-bottom:1px solid #fff}.grid-row-span .row-span-first{position:relative}.grid-row-span .row-span-first .x-grid3-cell-inner{position:absolute}.grid-row-span .row-span-last{border-bottom:1px solid #ededed}
    </style>
</head>
<body>
</body>
</html>
